import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { Link, Outlet, useLocation } from "react-router-dom";
import { useTheme } from "../../../components/ThemeProvider.js";
import { useAuth } from "../../../context/AuthContext.js";
import { useNavigate } from "react-router-dom";
import { Home, Building, Users, CreditCard, Settings, X, LogOut, Menu, Bell, BellRing } from "lucide-react";
export default function LandlordDashboardLayout() {
    const [sidebarOpen, setSidebarOpen] = useState(false);
    const { theme, toggleTheme } = useTheme();
    const location = useLocation();
    const { logout } = useAuth();
    const navigate = useNavigate();
    const handleLogout = async () => {
        await logout();
        navigate("/login");
    };
    function isActive(path) {
        const currentPath = location.pathname.replace(/\/+$/, '');
        const normalizedPath = path.replace(/\/+$/, '');
        return currentPath === normalizedPath ||
            (path === '' && currentPath === '/landlord/dashboard') ||
            (path !== '' && currentPath.startsWith(`/landlord/dashboard/${normalizedPath}`))
            ? "bg-primary-600 text-white"
            : "text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-primary-600/20";
    }
    // Close sidebar on mobile when clicking a nav link
    const handleNavClick = () => {
        setSidebarOpen(false);
    };
    return (_jsxs("div", { className: "flex h-screen bg-gradient-to-br from-gray-100 via-white to-blue-50 dark:from-gray-950/60 dark:via-gray-950/70 dark:to-gray-950/60", children: [_jsxs("div", { className: `fixed inset-0 z-40 lg:hidden ${sidebarOpen ? "block" : "hidden"}`, children: [_jsx("div", { className: "fixed inset-0 bg-gray-900 bg-opacity-75", onClick: () => setSidebarOpen(false) }), _jsxs("div", { className: "fixed inset-y-0 left-0 w-64 bg-white dark:bg-gray-950 border-r border-gray-200 dark:border-primary-600/20 flex flex-col z-50", children: [_jsxs("div", { className: "flex items-center justify-between h-16 px-4 border-b border-gray-200 dark:border-primary-600/20", children: [_jsx("span", { className: "text-xl font-bold text-primary-600 dark:text-primary-500", children: "NyumbaSmart" }), _jsx("button", { onClick: () => setSidebarOpen(false), className: "text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300", children: _jsx(X, { className: "w-6 h-6" }) })] }), _jsx("div", { className: "flex-1 overflow-y-auto", children: _jsxs("nav", { className: "px-2 py-4 space-y-5", children: [_jsxs(Link, { to: "", onClick: handleNavClick, className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/dashboard")}`, children: [_jsx(Home, { className: "w-5 h-5 mr-3" }), " Dashboard"] }), _jsxs(Link, { to: "properties", onClick: handleNavClick, className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/properties")}`, children: [_jsx(Building, { className: "w-5 h-5 mr-3" }), " Properties"] }), _jsxs(Link, { to: "tenants", onClick: handleNavClick, className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/tenants")}`, children: [_jsx(Users, { className: "w-5 h-5 mr-3" }), " Tenants"] }), _jsxs(Link, { to: "payments-revenue", onClick: handleNavClick, className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/payments-revenue")}`, children: [_jsx(CreditCard, { className: "w-5 h-5 mr-3" }), " Payments And"] }), _jsxs(Link, { to: "maintenance", onClick: handleNavClick, className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/maintenance")}`, children: [_jsx(BellRing, { className: "w-5 h-5 mr-3" }), " Maintenance Requests"] }), _jsxs(Link, { to: "advertiseproperty", onClick: handleNavClick, className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/advertiseproperty")}`, children: [_jsx(CreditCard, { className: "w-5 h-5 mr-3" }), " Advertise Property"] }), _jsxs(Link, { to: "subscriptions", onClick: handleNavClick, className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/subscriptions")}`, children: [_jsx(CreditCard, { className: "w-5 h-5 mr-3" }), " Subscriptions"] }), _jsxs(Link, { to: "bookings", className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/payments")}`, children: [_jsx(CreditCard, { className: "w-5 h-5 mr-3" }), "Bookings And visits"] }), _jsxs(Link, { to: "settings", onClick: handleNavClick, className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/settings")}`, children: [_jsx(Settings, { className: "w-5 h-5 mr-3" }), " Settings"] })] }) }), _jsx("div", { className: "p-4 border-t border-gray-200 dark:border-primary-600/20", children: _jsxs("button", { onClick: handleLogout, className: "flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-500", children: [_jsx(LogOut, { className: "w-5 h-5 mr-3" }), " Sign out"] }) })] })] }), _jsx("div", { className: "hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col", children: _jsxs("div", { className: "flex flex-col flex-1 min-h-0 border-r border-gray-200 dark:border-primary-600/20 bg-gradient-to-br from-primary-gray-100 via-white to-blue-50 dark:from-gray-950/60 dark:via-gray-950/70 dark:to-gray-950/60", children: [_jsx("div", { className: "flex items-center h-16 px-4 border-b border-gray-200 dark:border-primary-600/20", children: _jsx("span", { className: "text-xl font-bold text-primary-600 dark:text-primary-500", children: "NyumbaSmart" }) }), _jsx("div", { className: "flex-1 overflow-y-auto", children: _jsxs("nav", { className: "px-2 py-4 space-y-5", children: [_jsxs(Link, { to: "", className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/dashboard")}`, children: [_jsx(Home, { className: "w-5 h-5 mr-3" }), " Dashboard"] }), _jsxs(Link, { to: "properties", className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/properties")}`, children: [_jsx(Building, { className: "w-5 h-5 mr-3" }), " Properties"] }), _jsxs(Link, { to: "tenants", className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/tenants")}`, children: [_jsx(Users, { className: "w-5 h-5 mr-3" }), " Tenants"] }), _jsxs(Link, { to: "payments-revenue", className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/payments-revenue")}`, children: [_jsx(CreditCard, { className: "w-5 h-5 mr-3" }), " Payments And Revenue"] }), _jsxs(Link, { to: "maintenance", onClick: handleNavClick, className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/maintenance")}`, children: [_jsx(BellRing, { className: "w-5 h-5 mr-3" }), " Maintenance Requests"] }), _jsxs(Link, { to: "advertiseproperty", className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/payments")}`, children: [_jsx(CreditCard, { className: "w-5 h-5 mr-3" }), " Advertise Property"] }), _jsxs(Link, { to: "subscriptions", className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/payments")}`, children: [_jsx(CreditCard, { className: "w-5 h-5 mr-3" }), " Subscriptions"] }), _jsxs(Link, { to: "bookings", className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/payments")}`, children: [_jsx(CreditCard, { className: "w-5 h-5 mr-3" }), "Bookings And visits"] }), _jsxs(Link, { to: "settings", className: `flex items-center px-3 py-2 text-sm font-medium rounded-md ${isActive("/landlord/settings")}`, children: [_jsx(Settings, { className: "w-5 h-5 mr-3" }), " Settings"] })] }) }), _jsx("div", { className: "p-4 border-t border-gray-200 dark:border-primary-600/20", children: _jsxs("button", { onClick: handleLogout, className: "flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-500", children: [_jsx(LogOut, { className: "w-5 h-5 mr-3" }), " Sign out"] }) })] }) }), _jsxs("div", { className: "flex flex-col flex-1 lg:pl-64", children: [_jsxs("div", { className: "sticky top-0 z-10 flex h-16 flex-shrink-0 bg-gradient-to-br from-primary-gray-100 via-white to-blue-50 dark:from-gray-950/60 dark:via-gray-950/70 dark:to-gray-950/60 shadow", children: [_jsx("button", { type: "button", className: "px-4 border-r border-gray-200 dark:border-gray-700 text-gray-500 lg:hidden", onClick: () => setSidebarOpen(true), children: _jsx(Menu, { className: "h-6 w-6" }) }), _jsxs("div", { className: "flex-1 flex justify-between px-4", children: [_jsx("div", { className: "flex-1 flex items-center" }), _jsxs("div", { className: "ml-4 flex items-center md:ml-6", children: [_jsxs("button", { type: "button", className: "p-1 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500", onClick: toggleTheme, children: [theme === "dark" ? (_jsx("span", { className: "sr-only", children: "Switch to light mode" })) : (_jsx("span", { className: "sr-only", children: "Switch to dark mode" })), theme === "dark" ? (_jsx("svg", { className: "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", children: _jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" }) })) : (_jsx("svg", { className: "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", children: _jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" }) }))] }), _jsx("div", { className: "ml-3 relative", children: _jsxs("button", { type: "button", className: "p-1 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500", children: [_jsx("span", { className: "sr-only", children: "View notifications" }), _jsx(Bell, { className: "h-6 w-6" })] }) }), _jsx("div", { className: "ml-3 relative", children: _jsx("div", { children: _jsxs("button", { type: "button", className: "max-w-xs flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500", children: [_jsx("span", { className: "sr-only", children: "Open user menu" }), _jsx("img", { className: "h-8 w-8 rounded-full", src: "https://randomuser.me/api/portraits/men/1.jpg", alt: "User profile" })] }) }) })] })] })] }), _jsx("main", { className: "flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto", children: _jsx(Outlet, {}) })] })] }));
}
